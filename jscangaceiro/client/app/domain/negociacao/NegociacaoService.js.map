{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","_http","obtemNegociacoesDaSemana","get","then","dados","map","objeto","Date","data","quantidade","valor","err","Error","obtemNegociacoesDaSemanaAnterior","obtemNegociacoesDaSemanaRetrasada","obtemNegociacoesDoPeriodo","Promise","all","periodo","reduce","novoArray","item","concat","sort","a","b","getTime","catch"],"mappings":";;;;;;AAASA,uB,sBAAAA,W;;AACAC,sB,iBAAAA,U;;;AAEF,kBAAMC,iBAAN,CAAwB;;AAE3BC,8BAAc;AACV,yBAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACH;;AAEDK,2CAA2B;;AAEvB,2BAAO,KAAKD,KAAL,CACFE,GADE,CACE,oBADF,EAEFC,IAFE,CAGCC,SACIA,MAAMC,GAAN,CAAUC,UACN,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADJ,CAJL,EAOCC,OAAO;AACH,8BAAM,IAAIC,KAAJ,CAAU,iDAAV,CAAN;AACH,qBATF,CAAP;AAWH;;AAEDC,mDAAmC;;AAE/B,2BAAO,KAAKb,KAAL,CACFE,GADE,CACE,sBADF,EAEFC,IAFE,CAGCC,SACIA,MAAMC,GAAN,CAAUC,UACN,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADJ,CAJL,EAOCC,OAAO;AACH,8BAAM,IAAIC,KAAJ,CAAU,0DAAV,CAAN;AACH,qBATF,CAAP;AAWH;;AAEDE,oDAAoC;;AAEhC,2BAAO,KAAKd,KAAL,CACFE,GADE,CACE,uBADF,EAEFC,IAFE,CAGCC,SACIA,MAAMC,GAAN,CAAUC,UACN,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADJ,CAJL,EAOCC,OAAO;AACH,8BAAM,IAAIC,KAAJ,CAAU,2DAAV,CAAN;AACH,qBATF,CAAP;AAWH;;AAEDG,4CAA4B;AACxB,2BAAOC,QAAQC,GAAR,CAAY,CACf,KAAKhB,wBAAL,EADe,EAEf,KAAKY,gCAAL,EAFe,EAGf,KAAKC,iCAAL,EAHe,CAAZ,EAKNX,IALM,CAKDe,WAAWA,QACRC,MADQ,CACD,CAACC,SAAD,EAAYC,IAAZ,KAAqBD,UAAUE,MAAV,CAAiBD,IAAjB,CADpB,EAC4C,EAD5C,EAERE,IAFQ,CAEH,CAACC,CAAD,EAAIC,CAAJ,KAAUA,EAAEjB,IAAF,CAAOkB,OAAP,KAAmBF,EAAEhB,IAAF,CAAOkB,OAAP,EAF1B,CALV,EASNC,KATM,CASAhB,OAAO;AACV,8BAAM,IAAIC,KAAJ,CAAU,kDAAV,CAAN;AACH,qBAXM,CAAP;AAYH;AAhE0B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from \"../../util/HttpService.js\";\r\nimport { Negociacao } from \"./Negociacao.js\";\r\n\r\nexport class NegociacaoService {\r\n\r\n    constructor() {\r\n        this._http = new HttpService();\r\n    }\r\n\r\n    obtemNegociacoesDaSemana() {\r\n        \r\n        return this._http\r\n            .get('negociacoes/semana')\r\n            .then(\r\n                dados =>\r\n                    dados.map(objeto =>\r\n                        new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\r\n                ,\r\n                err => {\r\n                    throw new Error('Não foi possível obter as negociações da semana');\r\n                }\r\n            );\r\n    }\r\n\r\n    obtemNegociacoesDaSemanaAnterior() {\r\n        \r\n        return this._http\r\n            .get('negociacoes/anterior')\r\n            .then(\r\n                dados =>\r\n                    dados.map(objeto =>\r\n                        new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\r\n                ,\r\n                err => {\r\n                    throw new Error('Não foi possível obter as negociações da semana anterior');\r\n                }\r\n            );\r\n    }\r\n\r\n    obtemNegociacoesDaSemanaRetrasada() {\r\n        \r\n        return this._http\r\n            .get('negociacoes/retrasada')\r\n            .then(\r\n                dados =>\r\n                    dados.map(objeto =>\r\n                        new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\r\n                ,\r\n                err => {\r\n                    throw new Error('Não foi possível obter as negociações da semana retrasada');\r\n                }\r\n            );\r\n    }\r\n\r\n    obtemNegociacoesDoPeriodo() {\r\n        return Promise.all([\r\n            this.obtemNegociacoesDaSemana(),\r\n            this.obtemNegociacoesDaSemanaAnterior(),\r\n            this.obtemNegociacoesDaSemanaRetrasada()\r\n        ])\r\n        .then(periodo => periodo\r\n                .reduce((novoArray, item) => novoArray.concat(item), [])\r\n                .sort((a, b) => b.data.getTime() - a.data.getTime())\r\n        )\r\n        .catch(err => {\r\n            throw new Error('Não foi possivel obter as negociações do período')\r\n        });\r\n    }\r\n}"]}